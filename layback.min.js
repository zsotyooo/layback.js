window.matchMedia||(window.matchMedia=function(){"use strict";var styleMedia=window.styleMedia||window.media;if(!styleMedia){var style=document.createElement("style"),script=document.getElementsByTagName("script")[0],info=null;style.type="text/css",style.id="matchmediajs-test",script.parentNode.insertBefore(style,script),info="getComputedStyle"in window&&window.getComputedStyle(style,null)||style.currentStyle,styleMedia={matchMedium:function(media){var text="@media "+media+"{ #matchmediajs-test { width: 1px; } }";return style.styleSheet?style.styleSheet.cssText=text:style.textContent=text,"1px"===info.width}}}return function(media){return{matches:styleMedia.matchMedium(media||"all"),media:media||"all"}}}()),function($){"use strict";window.laybackTools=window.laybackTools||{};var ObjectWrapper=function(obj){this.init=function(obj){return void 0===obj&&(obj={}),this._obj=obj,this},this.obj=function(){return this._obj},this.get=function(key){return this.obj()[key]},this.size=function(){var key,size=0;for(key in this._obj)this._obj.hasOwnProperty(key)&&size++;return size},this.add=function(value,key,overwrite){return overwrite=void 0===overwrite?!0:!1,key||0===key||(key=this.getNextFreeKey()),this._obj[key]=value,this},this.del=function(key){delete this._obj[key]},this.getNextFreeKey=function(){return"_"+this.size()},this.extend=function(){var args=Array.prototype.slice.call(arguments);return"boolean"==typeof args[0]?args.splice(1,0,this.obj()):args.splice(0,0,this.obj()),$.extend.apply($.extend,args),this},this.each=function(){var args=Array.prototype.slice.call(arguments);return args.splice(0,0,this.obj()),$.each.apply($.each,args),this},this.init(obj)};window.laybackTools.objectWrapper=function(obj){return new ObjectWrapper(obj)}}(jQuery),function(){"use strict";window.laybackTools=window.laybackTools||{};var StringWrapper=function(str){this._str=str,this.dashToCamelCase=function(){return this._str.replace(/-(.)/g,function(match,group){return group.toUpperCase()})}};window.laybackTools.stringWrapper=function(str){return new StringWrapper(str)}}(jQuery),function($,window){"use strict";var _o=window.laybackTools.objectWrapper,Layback=(window.laybackTools.stringWrapper,function(){if(arguments[0]){if("function"==typeof arguments[0])return new Layback.Class(arguments[0]);if("object"==typeof arguments[0]&&!arguments[1])return new Layback.Object(arguments[0]);if("object"==typeof arguments[0]&&arguments[1])return new Layback.Object(arguments[0],arguments[1])}return arguments[0]&&arguments[1]?new Layback.ClassCreator(arguments[0],arguments[1]):Layback.Factory});Layback.Class=function(classObject){function _getClassHandler(){return _classHandler||(_classHandler=new Layback.ClassHandler(This,_classObject)),_classHandler}var _classObject=classObject,_classHandler=null,This=this;return this.make=function(){return _getClassHandler().make(),this},this.use=function(treatName,treatData){return _getClassHandler().addTreat(treatName,treatData),this},this.defaults=function(data){return _getClassHandler().setDefaults(data),this},this.getDefaults=function(data){return _getClassHandler().getDefaults(data)},this.addInitMethod=function(initMethod){return _getClassHandler().addInitMethod(initMethod),this},this.addMethod=function(methodName,method,forced){return _getClassHandler().addMethod(methodName,method,forced),this},this.addClassMethod=function(methodName,method,forced){return _getClassHandler().addClassMethod(methodName,method,forced),this},_classObject.__layback?_classObject.__layback.laybackObject:void _getClassHandler()},Layback.ClassHandler=function(laybackClassObj,classObject){var _laybackClassObj=laybackClassObj,_classObject=classObject;this.init=function(){var This=this;return _classObject.__layback?this:(_classObject.__layback={laybackObject:_laybackClassObj,defaultData:{},treats:{},initMethods:{},appliedTreats:{},methods:{},classMethods:{}},void Layback.Factory.systemTreats().each(function(treatName,treatData){This.addTreat(treatName,treatData)}))},this.make=function(){var This=this;this.addClassMethod("layback",function(){return this.__layback.laybackObject}),this.addMethod("layback",function(options){return this.__layback?this.__layback.laybackObject:new Layback.Object(this,options)}),_o(_classObject.__layback.treats).each(function(treatName,treatData){This.applyTreat(treatName,treatData)})},this.addInitMethod=function(initMethod){_o(_classObject.__layback.initMethods).add(initMethod)},this.addTreat=function(treatName,treatData){_o(_classObject.__layback.treats).add(treatData,treatName)},this.applyTreat=function(treatName){var TreatClass=Layback.Treats.getTreat(treatName),treatData=_classObject.__layback.treats[treatName];_classObject.__layback.appliedTreats[treatName]=new TreatClass(_classObject,treatData)},this.setDefaults=function(data){_classObject.__layback.defaultData=data},this.getDefaults=function(){return _classObject.__layback.defaultData},this.addMethod=function(methodName,method,forced){if(forced=!!forced,!forced&&(_classObject.prototype[methodName]||_classObject.__layback.methods[methodName]))throw new Error("The method already exists! Try using some other name, or use the forced parameter!");(forced||!_classObject.prototype[methodName]&&!_classObject.__layback.methods[methodName])&&(_classObject.__layback.methods[methodName]=method,_classObject.prototype[methodName]=method)},this.addClassMethod=function(methodName,method,forced){if(forced=!!forced,!forced&&(_classObject[methodName]||_classObject.__layback.classMethods[methodName]))throw new Error("The method already exists! Try using some other name, or use the forced parameter!");(forced||!_classObject[methodName]&&!_classObject.__layback.classMethods[methodName])&&(_classObject.__layback.classMethods[methodName]=method,_classObject[methodName]=method)},_classObject.__layback||this.init()},Layback.ClassCreator=function(methodName,method){return window[methodName]=method,new Layback.Class(window[methodName])},Layback.Object=function(obj,options){function _getObjectHandler(){return _objectHandler||(_objectHandler=new Layback.ObjectHandler(This,_obj,_options)),_objectHandler}this.r=Math.random();var _obj=obj,_options=options||{},_objectHandler=null,This=this;return this.setOptions=function(options){return _getObjectHandler().setOptions(options),this},this.getOptions=function(){return _getObjectHandler().getOptions()},this.addNs=function(key,data,pattern){return _getObjectHandler().addNs(key,data,pattern),this},this.getNs=function(key){return _getObjectHandler().getNs(key)},_obj.__layback?_obj.__layback.laybackObject:void _getObjectHandler()},Layback.ObjectHandler=function(laybackObjectObj,obj,options){var _laybackObjectObj=laybackObjectObj,_obj=obj,_options=options||{};this.init=function(){_obj.__layback={id:0,laybackObject:_laybackObjectObj},Layback.Factory.objectPool().addObject(_obj),_o(_obj.constructor.__layback.initMethods).each(function(i,initMethod){initMethod(_obj)})},this.setOptions=function(options){_options=options},this.getOptions=function(){return _options},this.addNs=function(key,data,pattern){data=data||{};var defaults=_obj.constructor.__layback.defaultData[key]||{},keyInObj="layback"+key.charAt(0).toUpperCase()+key.slice(1);_obj[keyInObj]=_obj[keyInObj]||{};var argData={};if(_obj.laybackData&&pattern){var regExp=pattern instanceof RegExp&&pattern||new RegExp(pattern.replace("*","(.*)"));_o(_obj.laybackData).each(function(name,element){var matches=name.match(regExp);matches&&(argData[matches[1].substring(0,1).toLowerCase()+matches[1].substring(1)]=element)})}_obj[keyInObj]=$.extend(!0,{},defaults,_obj[keyInObj],argData,data)},this.getNs=function(key){var keyInObj="layback"+key.charAt(0).toUpperCase()+key.slice(1);return _obj[keyInObj]=_obj[keyInObj]||{},_obj[keyInObj]},_obj.__layback||this.init()},Layback.Treats=function(pool){return Layback.Treats._pool[pool]},$.extend(Layback.Treats,{_pool:{system:_o({}),user:_o({})},getTreats:function(){return $.extend({},this._pool.system.obj(),this._pool.user.obj())},getTreat:function(treatName){return this._pool.user.get(treatName)||this._pool.system.get(treatName)}}),Layback.ObjectPool={_pool:_o({}),getObjects:function(){return this._pool},data:function(){return this._pool.obj()},addObject:function(obj){this._pool.add(obj),obj.__layback.id=this._pool.size()},removeObject:function(obj){if(!obj.__layback.id)throw new Error("Object has No ID");return this._pool.del(obj.__layback.id),this}},Layback.Factory={_systemTreats:new Layback.Treats("system"),_userTreats:new Layback.Treats("user"),tools:function(){return window.laybackTools},systemTreats:function(){return this._systemTreats},treats:function(){return this._userTreats},objectPool:function(){return Layback.ObjectPool}};var layback=function(){function _layback(args){return Layback.apply(this,args)}return _layback.prototype=Layback.prototype,new _layback(Array.prototype.slice.call(arguments))};window.layback=layback}(jQuery,window),function(){"use strict";var _o=window.laybackTools.objectWrapper,DataTreat=function(classObject){layback(classObject).addMethod("set",function(key,value){return _o(this.laybackData).add(value,key),this}).addMethod("get",function(key,defaultValue){return void 0!==this.laybackData[key]?this.laybackData[key]:defaultValue}).addInitMethod(function(obj){var options=obj.layback().getOptions();obj.layback().addNs("data",options)})};layback().systemTreats().add(DataTreat,"data")}($),function($){"use strict";var DomTreat=(window.laybackTools.objectWrapper,function(classObject){layback(classObject).addInitMethod(function(obj){obj.layback().addNs("dom",{},"*Element")}).addMethod("dom",function(){var args=Array.prototype.slice.call(arguments);return this.laybackDom[args[0]]&&(args[0]=this.laybackDom[args[0]]),$.apply($,args)}).addMethod("getElement",function(){return this.dom(this.get("element"))})});layback().systemTreats().add(DomTreat,"dom")}($),function(){"use strict";var _o=window.laybackTools.objectWrapper,_s=window.laybackTools.stringWrapper,EventTreat=function(classObject){layback(classObject).addInitMethod(function(obj){obj.layback().addNs("eventListeners").addNs("callbacks",{},/on([A-Z].*)/),_o(obj.laybackCallbacks).each(function(evt,callback){obj.observe(evt,callback)})}).addMethod("observe",function(evt,callback){return evt=_s(evt).dashToCamelCase(),this.laybackEventListeners[evt]||(this.laybackEventListeners[evt]={}),_o(this.laybackEventListeners[evt]).add(callback),this}).addMethod("dispatch",function(evt,evtData){if(evt=_s(evt).dashToCamelCase(),this.laybackEventListeners[evt]){var This=this;_o(this.laybackEventListeners[evt]).each(function(i,callback){var args=[This,evtData,evt];callback.apply(callback,args)})}return this})};layback().systemTreats().add(EventTreat,"event")}($),function($){"use strict";var _o=window.laybackTools.objectWrapper,CollectionTreat=function(classObject){var setItemCollectionPosition=function(item,pos){item.__laybackCollectionPosition=pos},getItemCollectionPosition=function(item){return item instanceof jQuery?item[0].__laybackCollectionPosition:item.__laybackCollectionPosition},reIndexItems=function(obj){var i=0;_o(obj.laybackCollection.items).each(function(key,item){setItemCollectionPosition(item,i),i++})};layback(classObject).addInitMethod(function(obj){obj.layback().addNs("collection",{items:[]}),reIndexItems(obj)}).addMethod("addCollectionItem",function(item){var This=this;return this.dispatch("collection-additem-before",item),item.constructor==Array||item instanceof jQuery?$.each(item,function(k,val){This.addCollectionItem(val)}):(setItemCollectionPosition(item,this.laybackCollection.items.length),this.laybackCollection.items.push(item)),this.dispatch("collection-additem-after",item),this}).addMethod("getCollectionItems",function(){return this.laybackCollection.items}).addMethod("getCollectionItemPosition",function(item){return getItemCollectionPosition(item)}).addMethod("getCollectionItem",function(index){var itemarr=this.sliceCollectionItems(index,index+1);return itemarr.length?itemarr[0]:!1}).addMethod("removeCollectionItem",function(item){return this.dispatch("collection-removeitem-before",item),"number"==typeof item&&this.laybackCollection.items.splice(item,1),this.laybackCollection.items.splice(getItemCollectionPosition(item),1),reIndexItems(this),this.dispatch("collection-removeitem-after",item),this}).addMethod("getCollectionSize",function(){return this.getCollectionItems().length}).addMethod("setPagerLimit",function(limit){return this.set("pagerLimit",limit),this}).addMethod("getPageItems",function(page,func){var limit=this.get("pagerLimit");return this.sliceCollectionItems(page*limit,(page+1)*limit,func)}).addMethod("eachCollectionItems",function(){var args=Array.prototype.slice.call(arguments);return args.splice(0,0,this.getItems()),$.each.apply($.each,args),this}).addMethod("grepCollectionItems",function(){var args=Array.prototype.slice.call(arguments);return args.splice(0,0,this.getCollectionItems()),$.grep.apply($.grep,args)}).addMethod("sliceCollectionItems",function(start,end,func){var items=this.getCollectionItems().slice(0),slice=items.slice(start,end);return func&&"function"==typeof func&&$.each(slice,func),slice})};layback().treats().add(CollectionTreat,"collection")}($),function($){"use strict";var _o=window.laybackTools.objectWrapper,JqPluginTreat=function(classObject,pluginName){var _classObject=classObject,_pluginName=pluginName,This=this;This._lastReturnValue=null,layback(classObject).addClassMethod("getJqueryPluginObject",function(element){return $(element).data(_pluginName+"-object")}).addClassMethod("getJqueryPluginObjects",function(element){if($(element).length<2)return[this.getJqueryPluginObject(element)];var objects=[],This=this;return $(element).each(function(){objects.push(This.getJqueryPluginObject(element))}),objects}),$.fn[pluginName]||($.fn[pluginName]=function(){var _userArgs=$.makeArray(arguments);this.each(function(){var pluginObject=$(this).data(pluginName+"-object");if(!pluginObject){var userOptions=_userArgs[0]||{},elementOptions=$(this).attr(pluginName+"-options");return elementOptions=elementOptions?eval("("+elementOptions+")"):{},pluginObject=new classObject($.extend(!0,{},userOptions,elementOptions,{element:$(this)})),$(this).data(pluginName+"-object",pluginObject),this}var optionsCopy=_userArgs.slice(0),func=optionsCopy.shift();This._lastReturnValue=pluginObject[func].apply(pluginObject,optionsCopy)})})};layback().treats().add(JqPluginTreat,"jQuery-plugin")}($),function($){"use strict";var _o=window.laybackTools.objectWrapper,ResponsiveTreat=function(classObject){layback(classObject).addInitMethod(function(obj){obj.layback().addNs("breakpoints"),_o(obj.laybackBreakpoints).each(function(name,responderData){responderData.data&&obj.respondTo(name,function(){this.laybackData=$.extend(this.laybackData,responderData.data)})}),ResponsiveTreat.watchWindowSize()}).addMethod("respondTo",function(bpName,func){ResponsiveTreat.addResponder(bpName,this,func)}).addMethod("getCurrentBreakPoint",function(){var currentBreakpoint=null,currentBreakpointVal=0,firstBreakpoint=null,firstBreakpointVal=1e6;return _o(this.laybackBreakpoints).each(function(name,bpData){firstBreakpointVal>bpData.width&&(firstBreakpointVal=bpData.width,firstBreakpoint=name),currentBreakpointVal<bpData.width&&(!ResponsiveTreat.isMqSupported()||matchMedia(ResponsiveTreat.getMqString(bpData.width)).matches)&&(currentBreakpointVal=bpData.width,currentBreakpoint=name)}),0===currentBreakpointVal?{name:firstBreakpoint,width:firstBreakpointVal}:{name:currentBreakpoint,width:currentBreakpointVal}})};ResponsiveTreat=$.extend(ResponsiveTreat,{_isMqSupported:null,_baseFontSize:null,_responders:_o({}),_windowSizeWatched:!1,addResponder:function(name,obj,func){var width=obj.laybackBreakpoints[name].width;this._responders.add({width:width,name:name,obj:obj,responderFunction:func})},isMqSupported:function(){return null===this._isMqSupported&&(this._isMqSupported=!!matchMedia("only all").matches),this._isMqSupported},getBaseFontSize:function(){return null===this._baseFontSize&&(this._baseFontSize=parseFloat($("body").css("font-size"))),this._baseFontSize},getMqString:function(pixels){return"(min-width: "+pixels/this.getBaseFontSize()+"em)"},respond:function(){this._responders.each(function(i,responderData){responderData.width==responderData.obj.getCurrentBreakPoint().width&&responderData.responderFunction.apply(responderData.obj)})},watchWindowSize:function(){if(!this._windowSizeWatched){this._windowSizeWatched=!0;var This=this;jQuery(window).resize(function(){This.respond()}).resize()}}}),layback().treats().add(ResponsiveTreat,"respond")}($),function($){"use strict";var _s=(window.laybackTools.objectWrapper,window.laybackTools.stringWrapper),SetGetTreat=function(classObject){this._class=classObject;var This=this;this.createSetterMethod=function(obj,key){var methodName=_s("set-"+key).dashToCamelCase();layback(This._class).addMethod(methodName,function(value){return this.set(key,value)})},this.createGetterMethod=function(obj,key){var methodName=_s("get-"+key).dashToCamelCase();layback(This._class).addMethod(methodName,function(def){return this.get(key,def)})},layback(classObject).addInitMethod(function(obj){$.each(obj.laybackData,function(key){This.createGetterMethod(obj,key),This.createSetterMethod(obj,key)})})};layback().treats().add(SetGetTreat,"setget")}($);